(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[882],{594:function(e,t,r){Promise.resolve().then(r.bind(r,3467))},3467:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return D}});var a=r(7437),s=r(2265),n=r(2451),l=r(407),i=r(7782),o=r(4508),d=r(2869);let c=e=>{let{className:t,...r}=e;return(0,a.jsx)("nav",{role:"navigation","aria-label":"pagination",className:(0,o.cn)("mx-auto flex w-full justify-center",t),...r})};c.displayName="Pagination";let u=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("ul",{ref:t,className:(0,o.cn)("flex flex-row items-center gap-1",r),...s})});u.displayName="PaginationContent";let f=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("li",{ref:t,className:(0,o.cn)("",r),...s})});f.displayName="PaginationItem";let m=e=>{let{className:t,isActive:r,size:s="icon",...n}=e;return(0,a.jsx)("a",{"aria-current":r?"page":void 0,className:(0,o.cn)((0,d.d)({variant:r?"outline":"ghost",size:s}),t),...n})};m.displayName="PaginationLink";let p=e=>{let{className:t,...r}=e;return(0,a.jsxs)(m,{"aria-label":"Go to previous page",size:"default",className:(0,o.cn)("gap-1 pl-2.5",t),...r,children:[(0,a.jsx)(n.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Previous"})]})};p.displayName="PaginationPrevious";let x=e=>{let{className:t,...r}=e;return(0,a.jsxs)(m,{"aria-label":"Go to next page",size:"default",className:(0,o.cn)("gap-1 pr-2.5",t),...r,children:[(0,a.jsx)("span",{children:"Next"}),(0,a.jsx)(l.Z,{className:"h-4 w-4"})]})};x.displayName="PaginationNext";let h=e=>{let{className:t,...r}=e;return(0,a.jsxs)("span",{"aria-hidden":!0,className:(0,o.cn)("flex h-9 w-9 items-center justify-center",t),...r,children:[(0,a.jsx)(i.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"More pages"})]})};h.displayName="PaginationEllipsis";var g=r(6070);let j=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsx)("table",{ref:t,className:(0,o.cn)("w-full caption-bottom text-sm",r),...s})})});j.displayName="Table";let v=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("thead",{ref:t,className:(0,o.cn)("[&_tr]:border-b",r),...s})});v.displayName="TableHeader";let b=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("tbody",{ref:t,className:(0,o.cn)("[&_tr:last-child]:border-0",r),...s})});b.displayName="TableBody",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("tfoot",{ref:t,className:(0,o.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",r),...s})}).displayName="TableFooter";let N=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("tr",{ref:t,className:(0,o.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",r),...s})});N.displayName="TableRow";let y=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("th",{ref:t,className:(0,o.cn)("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",r),...s})});y.displayName="TableHead";let w=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("td",{ref:t,className:(0,o.cn)("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",r),...s})});w.displayName="TableCell",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("caption",{ref:t,className:(0,o.cn)("mt-4 text-sm text-muted-foreground",r),...s})}).displayName="TableCaption";var S=r(4014);function T(e){let{reports:t,total:r,totalFee:s,page:n,totalPages:l,onPageChange:i}=e;return(0,a.jsxs)(g.Zb,{children:[(0,a.jsx)(g.Ol,{children:(0,a.jsx)(g.ll,{children:"Laporan Transaksi"})}),(0,a.jsxs)(g.aY,{className:"space-y-4",children:[(0,a.jsx)("div",{className:"overflow-auto",children:(0,a.jsxs)(j,{children:[(0,a.jsx)(v,{children:(0,a.jsxs)(N,{children:[(0,a.jsx)(y,{children:"No"}),(0,a.jsx)(y,{children:"Nama TV"}),(0,a.jsx)(y,{children:"IP Address"}),(0,a.jsx)(y,{children:"Tanggal"}),(0,a.jsx)(y,{children:"Durasi"}),(0,a.jsx)(y,{children:"Fee"})]})}),(0,a.jsx)(b,{children:t.map((e,t)=>(0,a.jsxs)(N,{children:[(0,a.jsx)(w,{children:(n-1)*10+t+1}),(0,a.jsx)(w,{children:e.tvName}),(0,a.jsx)(w,{children:e.ipAddress}),(0,a.jsx)(w,{children:(0,S.WU)(new Date(e.startTime),"dd MMM yyyy HH:mm")}),(0,a.jsxs)(w,{children:[Math.round(e.durationMinutes/60)," Jam"]}),(0,a.jsx)(w,{children:(0,o.b)(e.fee)})]},t))})]})}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Total data: ",r," | Total fee: ",(0,a.jsx)("span",{className:"font-semibold",children:(0,o.b)(s)})]}),(0,a.jsx)(c,{children:(0,a.jsx)(u,{children:(()=>{let e=[];e.push((0,a.jsx)(f,{children:(0,a.jsx)(p,{href:"#",onClick:e=>{e.preventDefault(),n>1&&i(n-1)}})},"prev"));for(let t=1;t<=l;t++)1===t||t===l||t>=n-1&&t<=n+1?e.push((0,a.jsx)(f,{children:(0,a.jsx)(m,{href:"#",isActive:t===n,onClick:e=>{e.preventDefault(),i(t)},children:t})},t)):(t===n-2||t===n+2)&&e.push((0,a.jsx)(f,{children:(0,a.jsx)(h,{})},"ellipsis-".concat(t)));return e.push((0,a.jsx)(f,{children:(0,a.jsx)(x,{href:"#",onClick:e=>{e.preventDefault(),n<l&&i(n+1)}})},"next")),e})()})})]})]})]})}var R=r(5186);function E(e){let{month:t,onMonthChange:r}=e;return(0,a.jsx)("div",{className:"flex flex-col md:flex-row items-start md:items-center gap-4",children:(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("label",{className:"text-sm text-muted-foreground mb-1",children:"Filter Bulan"}),(0,a.jsx)(R.I,{type:"month",value:null!=t?t:"",onChange:e=>r(e.target.value),className:"w-[200px]"})]})})}var I=r(5256),O=r(5153),C=r(4942);function D(){let{get:e}=(0,I.h)(),{toast:t}=(0,O.pm)(),[r,n]=(0,s.useState)([]),[l,i]=(0,s.useState)(0),[o,c]=(0,s.useState)(1),[u,f]=(0,s.useState)(1),[m,p]=(0,s.useState)(new Date().toISOString().slice(0,7)),[x,h]=(0,s.useState)(null);async function g(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=new URLSearchParams({page:r.toString(),limit:"10"});x?(a.set("startDate",x.from.toISOString()),a.set("endDate",x.to.toISOString())):m&&a.set("month",m);try{let t=await e("/api/reports?"+a.toString());n(t.data),i(t.totalFee),c(t.page),f(t.totalPages)}catch(e){t({title:"Gagal memuat laporan",variant:"destructive"})}}return(0,s.useEffect)(()=>{g()},[m,x]),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"Laporan"}),(0,a.jsxs)(d.z,{variant:"outline",size:"sm",onClick:()=>{let e=new URLSearchParams;x?(e.set("startDate",x.from.toISOString()),e.set("endDate",x.to.toISOString())):m&&e.set("month",m);let t="/api/reports/export?"+e.toString();window.open(t,"_blank")},className:"gap-2",children:[(0,a.jsx)(C.Z,{className:"w-4 h-4"}),"Export"]})]}),(0,a.jsx)(E,{month:m,onMonthChange:e=>{h(null),p(e)},range:x,onRangeChange:e=>{p(null),h(e)}}),(0,a.jsx)(T,{reports:r,total:r.length,totalFee:l,page:o,totalPages:u,onPageChange:e=>{c(e),g(e)}})]})}},2869:function(e,t,r){"use strict";r.d(t,{d:function(){return o},z:function(){return d}});var a=r(7437),s=r(2265),n=r(7053),l=r(535),i=r(4508);let o=(0,l.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),d=s.forwardRef((e,t)=>{let{className:r,variant:s,size:l,asChild:d=!1,...c}=e,u=d?n.g7:"button";return(0,a.jsx)(u,{className:(0,i.cn)(o({variant:s,size:l,className:r})),ref:t,...c})});d.displayName="Button"},6070:function(e,t,r){"use strict";r.d(t,{Ol:function(){return i},SZ:function(){return d},Zb:function(){return l},aY:function(){return c},ll:function(){return o}});var a=r(7437),s=r(2265),n=r(4508);let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("rounded-xl border bg-card text-card-foreground shadow",r),...s})});l.displayName="Card";let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",r),...s})});i.displayName="CardHeader";let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("font-semibold leading-none tracking-tight",r),...s})});o.displayName="CardTitle";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",r),...s})});d.displayName="CardDescription";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",r),...s})});c.displayName="CardContent",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",r),...s})}).displayName="CardFooter"},5186:function(e,t,r){"use strict";r.d(t,{I:function(){return l}});var a=r(7437),s=r(2265),n=r(4508);let l=s.forwardRef((e,t)=>{let{className:r,type:s,...l}=e;return(0,a.jsx)("input",{type:s,className:(0,n.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...l})});l.displayName="Input"},5153:function(e,t,r){"use strict";r.d(t,{pm:function(){return f}});var a=r(2265);let s=0,n=new Map,l=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},i=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?l(r):e.toasts.forEach(e=>{l(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},o=[],d={toasts:[]};function c(e){d=i(d,e),o.forEach(e=>{e(d)})}function u(e){let{...t}=e,r=(s=(s+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>c({type:"DISMISS_TOAST",toastId:r});return c({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:e=>{e||a()}}}),{id:r,dismiss:a,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function f(){let[e,t]=a.useState(d);return a.useEffect(()=>(o.push(t),()=>{let e=o.indexOf(t);e>-1&&o.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},5256:function(e,t,r){"use strict";r.d(t,{h:function(){return s}});var a=r(5153);function s(){let{toast:e}=(0,a.pm)();async function t(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",a=arguments.length>2?arguments[2]:void 0;try{let e=await fetch(t,{method:r,headers:{"Content-Type":"application/json"},body:a?JSON.stringify(a):void 0});if(!e.ok){let t=await e.json();throw Error(t.message||"Request failed")}if(204===e.status)return null;return await e.json()}catch(t){throw e({variant:"destructive",title:"Error",description:t instanceof Error?t.message:"Something went wrong."}),t}}return{get:e=>t(e,"GET"),post:(e,r)=>t(e,"POST",r),patch:(e,r)=>t(e,"PATCH",r),put:(e,r)=>t(e,"PUT",r),del:e=>t(e,"DELETE")}}},4508:function(e,t,r){"use strict";r.d(t,{b:function(){return l},cn:function(){return n}});var a=r(1994),s=r(3335);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.m6)((0,a.W)(t))}function l(e){return new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(e)}}},function(e){e.O(0,[203,408,971,117,744],function(){return e(e.s=594)}),_N_E=e.O()}]);